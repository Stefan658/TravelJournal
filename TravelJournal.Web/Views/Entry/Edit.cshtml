@model TravelJournal.Web.ViewModels.Entries.CreateEntryViewModel

<div class="d-flex justify-content-between align-items-center mb-2">
    <h2 class="mb-0">Edit Entry</h2>

    <div class="d-flex gap-2">
        <a class="btn btn-outline-secondary"
           href="@Url.Action("Details", "Entry", new { id = Model.EntryId })">
            View Details
        </a>

        <a class="btn btn-secondary"
           href="@Url.Action("Index", "Entry", new { journalId = Model.JournalId })">
            Back to Entries
        </a>
    </div>
</div>

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger mt-3">@TempData["Error"]</div>
}
@if (TempData["Success"] != null)
{
    <div class="alert alert-success mt-3">@TempData["Success"]</div>
}

<hr />

<div class="card p-3">
    <div class="card-body p-0">

        @Html.ValidationSummary(true, "", new { @class = "alert alert-danger" })

        @using (Html.BeginForm("Edit", "Entry", FormMethod.Post))
        {
            @Html.AntiForgeryToken()

            @Html.HiddenFor(m => m.EntryId)
            @Html.HiddenFor(m => m.JournalId)
            @Html.HiddenFor(m => m.UserId)

            <div class="mb-3">
                @Html.LabelFor(m => m.Title, new { @class = "form-label fw-semibold" })
                @Html.TextBoxFor(m => m.Title, new
                {
                    @class = "form-control",
                    placeholder = "e.g., Day 1 in Rome"
                })
                @Html.ValidationMessageFor(m => m.Title, "", new { @class = "text-danger small" })
            </div>

            <div class="mb-3">
                @Html.LabelFor(m => m.Content, new { @class = "form-label fw-semibold" })
                @Html.TextAreaFor(m => m.Content, new
                {
                    @class = "form-control",
                    rows = 6,
                    placeholder = "Write your notes..."
                })
                @Html.ValidationMessageFor(m => m.Content, "", new { @class = "text-danger small" })
            </div>

            <div class="d-flex flex-wrap gap-2 mt-3">
                <button type="submit" class="btn btn-warning">
                    Update
                </button>

                <a class="btn btn-outline-secondary"
                   href="@Url.Action("Index", "Entry", new { journalId = Model.JournalId })">
                    Cancel
                </a>
            </div>
        }
    </div>
</div>

<div class="mt-3 small text-muted">
    Tip: photos are managed from <b>Entry Details</b> after the entry is saved.
</div>
